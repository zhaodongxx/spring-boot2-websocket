<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>书架</title>
    <!-- Font Awesome -->
    <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- Bootstrap core CSS -->
    <link href="https://cdn.bootcss.com/bootstrap/4.0.0/css/bootstrap.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="/css/mdb.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
    <link href="/css/toastr.css" rel="stylesheet">
</head>

<body class="creative-lp">

<header>

    <!-- 顶部导航 -->
    <nav th:replace="~{common :: nav}"></nav>

</header>

<div style="padding-top: 70px">
    <!-- Intro Section -->
    <div class="view jarallax" data-jarallax='{"speed": 0.2}'
         style="background-position: top; background-image: url(https://upload-images.jianshu.io/upload_images/3424642-e704c390642f557d.png);">
        <div class="full-bg-img">
            <div class="mask rgba-black-light">
                <div class="container flex-center">
                    <div class="row pt-5 mt-3">
                        <div class="col-md-12 wow fadeIn mb-3">
                            <div class="text-center white-text">
                                <ul class="list-unstyled ">
                                    <li>
                                        <h4 class="display-4 mt-md-5 mt-md-0 mb-5 font-weight-bold white-text wow fadeIn"
                                            data-wow-delay="0.3s">
                                            <strong>一封简信，呈上！</strong>
                                        </h4>
                                    <li>
                                        <h5 class="white-text description mb-5 wow fadeIn" data-wow-delay="0.4s"><p>
                                            读者，您好！</p>
                                            <p>电子书是为了您更好的利用电子设备进行学习，支持作者，请购买正版纸质书籍！</p>
                                            <p>作者，您好！</p>
                                            <p>书架所有资源均来自互联网或热心网友分享，若对您的权益造成影响，请联系我们及时删除。</p>
                                        </h5>
                                    </li>
                                    <li class="wow fadeIn" data-wow-delay="0.4s">
                                        <a class="btn pink-gradient btn-rounded btn-lg font-weight-bold"  data-toggle="modal" data-target="#shareModal">共享书籍</a>
                                        <a class="btn pink-gradient btn-rounded btn-lg font-weight-bold" href="/#contract">联系我们</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--/Intro-->
</div>


<!-- /.Main Container -->
<div class="container">
    <div class="row pt-4">

        <!-- Content -->
        <div class="col-lg-12">

            <!-- Books Grid -->
            <section class="section pt-4">

                <!-- Grid row -->
                <div class="row">

                    <!--Grid column-->
                    <div class="col-lg-4 col-md-6 mb-4" th:each="book : ${books}">
                        <!--Card-->
                        <div class="card card-ecommerce">

                            <!--Card image-->
                            <div class="view overlay pt-3">
                                <img th:src="${book.cover}" class="mx-auto d-block" alt="" style="max-height: 200px;">
                                <a>
                                    <div class="mask rgba-white-slight"></div>
                                </a>
                            </div>
                            <!--Card image-->

                            <!--Card content-->
                            <div class="card-body">
                                <!--Category & Title-->

                                <h5 class="card-title mb-1">
                                    <strong>
                                        <a href="" class="dark-grey-text" th:text="${book.name}"></a>
                                    </strong>
                                </h5>
                                <span class="badge badge-info mb-2" th:text="${book.language}"></span>
                                <!-- Rating -->
                                <ul class="rating">
                                    <li th:each="i : ${#numbers.sequence( 1, book.degree)}">
                                        <i class="fa fa-star blue-text"></i>
                                    </li>
                                </ul>

                                <!--Card footer-->
                                <div class="card-footer pb-0">
                                    <div class="row mb-0">
                                        <a th:href="${book.download}" class="btn btn-sm btn-outline-primary" target="_blank"><i
                                                class="fa fa-download"></i> 立即下载</a>
                                        <a th:if="${book.buy}" th:href="${book.buy}" class="btn btn-sm btn-outline-warning" target="_blank"><i
                                                class="fa fa-cart-plus"></i> 购买正版</a>
                                    </div>
                                </div>

                            </div>
                            <!--Card content-->

                        </div>
                        <!--Card-->

                    </div>
                    <!--Grid column-->

                </div>
                <!--Grid row-->

            </section>
            <!-- /.Products Grid -->

        </div>
        <!-- /.Content -->

    </div>
</div>
<!-- /.Main Container -->

<!-- 共享书籍 -->
<div class="modal fade" id="shareModal" tabindex="-1" role="dialog" aria-labelledby="shareModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-notify modal-success" role="document">
        <!--Content-->
        <div class="modal-content">
            <!--Header-->
            <div class="modal-header">
                <p class="heading lead">共享书籍</p>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true" class="white-text">×</span>
                </button>
            </div>
            <!--Body-->
            <div class="modal-body">
                <div class="text-center">
                    <i class="fa fa-check fa-4x mb-3 animated rotateIn"></i>
                    <div class="col-md-12 col-xl-12">
                        <form>
                            <!--Grid row-->
                            <div class="row">
                                <!--Grid column-->
                                <div class="col-md-6">
                                    <div class="md-form">
                                        <div class="md-form">
                                            <input type="text" id="user-name" class="form-control">
                                            <label for="user-name" class="">昵称</label>
                                        </div>
                                    </div>
                                </div>
                                <!--Grid column-->
                                <!--Grid column-->
                                <div class="col-md-6">
                                    <div class="md-form">
                                        <div class="md-form">
                                            <input type="text" id="user-email" class="form-control">
                                            <label for="user-email" class="">微信</label>
                                        </div>
                                    </div>
                                </div>
                                <!--Grid column-->
                            </div>
                            <!--Grid row-->
                            <!--Grid row-->
                            <div class="row">
                                <!--Grid column-->
                                <div class="col-md-12">
                                    <div class="md-form">
                                        <textarea type="text" id="user-content" class="md-textarea form-control" rows="3"></textarea>
                                        <label for="user-content">下载地址</label>
                                    </div>
                                </div>
                            </div>
                            <!--Grid row-->
                        </form>
                    </div>
                </div>
            </div>

            <!--Footer-->
            <div class="modal-footer justify-content-center">
                <a type="button" class="btn btn-success waves-effect waves-light" onclick="submitMessage()" data-dismiss="modal">
                    <i class="fa fa-check ml-1"></i>
                    确定
                </a>
                <a type="button" class="btn btn-outline-success waves-effect" data-dismiss="modal">
                    <i class="fa fa-times l-1"></i>
                    取消
                </a>
            </div>
        </div>
        <!--/.Content-->
    </div>
</div>

<!-- 返回顶部 -->
<section >
    <div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
        <a class="btn-floating btn-lg purple-gradient" style="display:none;" id="goTop">
            <i class="fa fa-arrow-up" aria-hidden="true"></i>
        </a>
    </div>
</section>

<!-- 网站底部 -->
<footer th:replace="~{common :: footer}"></footer>
<!-- /网站底部 -->

<!-- JQuery -->
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<!-- Bootstrap core JavaScript -->
<script src="https://cdn.bootcss.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<!-- MDB core JavaScript -->
<script src="https://cdn.bootcss.com/mdbootstrap/4.5.0/js/mdb.min.js"></script>
<script src="https://cdn.bootcss.com/toastr.js/latest/toastr.min.js"></script>

<script>
    //Animation init
    new WOW().init();

    // 返回顶部
    $(function(){
        $(window).scroll(function(){
            if($(window).scrollTop() > 500){
                $("#goTop").fadeIn(200);
            }
            else{
                $("#goTop").hide(200);
            }
        });
        $("#goTop").click(function(){
            $('html,body').animate({'scrollTop': 0 }, 500);
        });
    });

    /**
     * 用户提交留言
     */
    function submitMessage() {
        var username = $("#user-name").val();
        var email = $("#user-email").val();
        var message = $("#user-content").val();
        if(username.trim().length === 0){
            toastr.error("请填写您的姓名 ！");
            return;
        }
        if(email.trim().length === 0){
            toastr.error("请填写您的微信 ！");
            return;
        }
        if(message.trim().length === 0){
            toastr.error("下载地址不能为空 ！");
            return;
        }
        $.post("/api/common/message",{
            nickname:username,
            email:email,
            content:message
        },function(response){
            if (response.code ===  0){
                $('#user-name').val('');
                $('#user-email').val('');
                $('#user-content').val('');
                toastr.success("感谢您的分享，审核通过后会及时上架！");
            }else {
                toastr.error("发送失败，请用其他方式联系我们！");
            }
        });
        return false;
    }
</script>

</body>
</html>